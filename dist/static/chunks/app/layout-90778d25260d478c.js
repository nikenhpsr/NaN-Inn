(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4916:function(e,s,l){Promise.resolve().then(l.bind(l,8053)),Promise.resolve().then(l.bind(l,272)),Promise.resolve().then(l.bind(l,6019)),Promise.resolve().then(l.bind(l,7379)),Promise.resolve().then(l.bind(l,384)),Promise.resolve().then(l.bind(l,3025)),Promise.resolve().then(l.t.bind(l,9969,23)),Promise.resolve().then(l.t.bind(l,9971,23))},4817:function(e,s,l){"use strict";var r=l(1264),t=l(7005),o=l.n(t);s.Z=e=>{let{src:s}=e;return(0,r.jsx)(o(),{className:"rounded-full",height:"30",width:"30",alt:"Avatar",src:s||"/images/placeholder.jpg"})}},6019:function(e,s,l){"use strict";l.r(s);var r=l(1264),t=l(6141),o=l(3451),i=l(4575),n=l(5800),a=l(3240),c=l(7094),d=l(4446),u=l(1911),x=l(5528),h=l(3574),m=l(7288),p=l(4888);s.default=()=>{let e=(0,c.useRouter)(),s=(0,u.Z)(),l=(0,d.Z)(),[b,f]=(0,t.useState)(!1),{register:g,handleSubmit:j,formState:{errors:C}}=(0,n.cI)({defaultValues:{email:"",password:""}}),v=(0,t.useCallback)(()=>{s.onClose(),l.onOpen()},[s,l]),y=(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(m.default,{title:"Welcome back",subtitle:"Login to your account!"}),(0,r.jsx)("label",{htmlFor:"email",children:"Email: "}),(0,r.jsx)(h.Z,{id:"email",label:"Email",disabled:b,register:g,errors:C,required:!0}),(0,r.jsx)("label",{htmlFor:"password",children:"Password: "}),(0,r.jsx)(h.Z,{id:"password",label:"Password",type:"password",disabled:b,register:g,errors:C,required:!0})]}),w=(0,r.jsxs)("div",{className:"flex flex-col gap-4 mt-3",children:[(0,r.jsx)("hr",{}),(0,r.jsx)(p.Z,{outline:!0,label:"Continue with Google",icon:a.JM8,onClick:()=>(0,i.signIn)("google")}),(0,r.jsx)("div",{className:"   text-neutral-500 text-center mt-4 font-light",children:(0,r.jsxs)("p",{children:["First time using NaNInn?",(0,r.jsx)("span",{onClick:v,className:"   text-neutral-800   cursor-pointer    hover:underline   ",children:" Create an account"})]})})]});return(0,r.jsx)(x.Z,{disabled:b,isOpen:s.isOpen,title:"Login",actionLabel:"Continue",onClose:s.onClose,onSubmit:j(l=>{f(!0),(0,i.signIn)("credentials",{...l,redirect:!1}).then(l=>{f(!1),(null==l?void 0:l.ok)&&(o.Am.success("Logged in"),e.refresh(),s.onClose()),(null==l?void 0:l.error)&&o.Am.error(l.error)})}),body:y,footer:w})}},3025:function(e,s,l){"use strict";l.r(s);var r=l(1264),t=l(5083),o=l(4575),i=l(3240),n=l(6141),a=l(3451),c=l(5800),d=l(1911),u=l(4446),x=l(5528),h=l(3574),m=l(7288),p=l(4888);s.default=()=>{let e=(0,u.Z)(),s=(0,d.Z)(),[l,b]=(0,n.useState)(!1),{register:f,handleSubmit:g,formState:{errors:j}}=(0,c.cI)({defaultValues:{name:"",email:"",password:""}}),C=(0,n.useCallback)(()=>{e.onClose(),s.onOpen()},[e,s]),v=(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(m.default,{title:"Welcome to NaNInn",subtitle:"Create an account!"}),(0,r.jsx)("label",{htmlFor:"email",children:"Email: "}),(0,r.jsx)(h.Z,{id:"email",label:"Email",disabled:l,register:f,errors:j,required:!0}),(0,r.jsx)("label",{htmlFor:"name",children:"Username: "}),(0,r.jsx)(h.Z,{id:"name",label:"Name",disabled:l,register:f,errors:j,required:!0}),(0,r.jsx)("label",{htmlFor:"password",children:"Password: "}),(0,r.jsx)(h.Z,{id:"password",label:"Password",type:"password",disabled:l,register:f,errors:j,required:!0})]}),y=(0,r.jsxs)("div",{className:"flex flex-col gap-4 mt-3",children:[(0,r.jsx)("hr",{}),(0,r.jsx)(p.Z,{outline:!0,label:"Continue with Google",icon:i.JM8,onClick:()=>(0,o.signIn)("google")}),(0,r.jsx)("div",{className:"   text-neutral-500    text-center    mt-4    font-light   ",children:(0,r.jsxs)("p",{children:["Already have an account?",(0,r.jsx)("span",{onClick:C,className:"   text-neutral-800   cursor-pointer    hover:underline   ",children:" Log in"})]})})]});return(0,r.jsx)(x.Z,{disabled:l,isOpen:e.isOpen,title:"Register",actionLabel:"Continue",onClose:e.onClose,onSubmit:g(l=>{b(!0),t.Z.post("/api/register",l).then(()=>{a.Am.success("Registered!"),e.onClose(),s.onOpen()}).catch(e=>{a.Am.error(e)}).finally(()=>{b(!1)})}),body:v,footer:y})}},7379:function(e,s,l){"use strict";l.r(s);var r,t,o=l(1264),i=l(5083),n=l(3451),a=l(5800),c=l(5077),d=l.n(c),u=l(7094),x=l(6141),h=l(6779),m=l(5528),p=l(9592),b=l(5468),f=l(8632),g=l(4867),j=l(3574),C=l(7288),v=l(4613);(r=t||(t={}))[r.CATEGORY=0]="CATEGORY",r[r.LOCATION=1]="LOCATION",r[r.INFO=2]="INFO",r[r.IMAGES=3]="IMAGES",r[r.DESCRIPTION=4]="DESCRIPTION",r[r.PRICE=5]="PRICE",s.default=()=>{let e=(0,u.useRouter)(),s=(0,h.Z)(),[r,c]=(0,x.useState)(!1),[y,w]=(0,x.useState)(t.CATEGORY),{register:N,handleSubmit:O,setValue:k,watch:Z,formState:{errors:I},reset:E}=(0,a.cI)({defaultValues:{category:"",location:null,guestCount:1,roomCount:1,imageSrc:"",price:1,title:"",description:""}}),S=Z("category"),A=Z("guestCount"),P=Z("roomCount"),R=Z("imageSrc"),L=Z("location"),T=(e,s)=>{k(e,s,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},G=(0,x.useMemo)(()=>d()(()=>Promise.all([l.e(726),l.e(250)]).then(l.bind(l,7250)),{loadableGenerated:{webpack:()=>[7250]},ssr:!1}),[]),F=()=>{w(e=>e+1)},M=(0,x.useMemo)(()=>y===t.PRICE?"Create":"Next",[y]),q=(0,x.useMemo)(()=>{if(y!==t.CATEGORY)return"Back"},[y]),Y=(0,o.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,o.jsx)(C.default,{title:"Which of these best describes your place?",subtitle:"Pick a category"}),(0,o.jsx)("div",{className:"   grid    grid-cols-1    md:grid-cols-2    gap-3   max-h-[50vh]   overflow-y-auto   ",children:f.b.map(e=>(0,o.jsx)("div",{className:"col-span-1",children:(0,o.jsx)(b.Z,{onClick:e=>T("category",e),selected:S===e.label,label:e.label,icon:e.icon})},e.label))})]});return y===t.LOCATION&&(Y=(0,o.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,o.jsx)(C.default,{title:"Where is your properties located?",subtitle:"Help guests find your property!"}),(0,o.jsx)(v.Z,{value:L,onChange:e=>T("location",e)}),(0,o.jsx)(G,{center:null==L?void 0:L.latlng})]})),y===t.INFO&&(Y=(0,o.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,o.jsx)(C.default,{title:"Share some basics about your place",subtitle:"What amenitis do you have?"}),(0,o.jsx)(p.Z,{onChange:e=>T("guestCount",e),value:A,title:"Guests",subtitle:"How many guests do you allow?"}),(0,o.jsx)("hr",{}),(0,o.jsx)(p.Z,{onChange:e=>T("roomCount",e),value:P,title:"Rooms",subtitle:"How many rooms do you have?"}),(0,o.jsx)("hr",{})]})),y===t.IMAGES&&(Y=(0,o.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,o.jsx)(C.default,{title:"Add a photo of your property",subtitle:"Show guests what your property looks like!"}),(0,o.jsx)(g.Z,{onChange:e=>T("imageSrc",e),value:R})]})),y===t.DESCRIPTION&&(Y=(0,o.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,o.jsx)(C.default,{title:"How would you describe your property?",subtitle:"Short and sweet works best!"}),(0,o.jsx)(j.Z,{id:"title",label:"Title",disabled:r,register:N,errors:I,required:!0}),(0,o.jsx)("hr",{}),(0,o.jsx)(j.Z,{id:"description",label:"Description",disabled:r,register:N,errors:I,required:!0})]})),y===t.PRICE&&(Y=(0,o.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,o.jsx)(C.default,{title:"Now, set your price",subtitle:"How much do you charge per night?"}),(0,o.jsx)(j.Z,{id:"price",label:"Price",formatPrice:!0,type:"number",disabled:r,register:N,errors:I,required:!0})]})),(0,o.jsx)(m.Z,{disabled:r,isOpen:s.isOpen,title:"Rent your property!",actionLabel:M,onSubmit:O(l=>{if(y!==t.PRICE)return F();c(!0),i.Z.post("/api/listings",l).then(()=>{n.Am.success("Listing created!"),e.refresh(),E(),w(t.CATEGORY),s.onClose()}).catch(()=>{n.Am.error("Something went wrong.")}).finally(()=>{c(!1)})}),secondaryActionLabel:q,secondaryAction:y===t.CATEGORY?void 0:()=>{w(e=>e-1)},onClose:s.onClose,body:Y})}},272:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return j}});var r=l(1264),t=l(8632),o=l(7635),i=l(7005),n=l.n(i),a=l(7094),c=()=>{let e=(0,a.useRouter)();return(0,r.jsx)(n(),{onClick:()=>e.push("/"),className:"md:block cursor-pointer",src:"/images/logo.png",height:"100",width:"100",alt:"Logo"})},d=l(6141),u=l(8096),x=l(4575),h=l(1911),m=l(4446),p=l(6779),b=e=>{let{onClick:s,label:l}=e;return(0,r.jsx)("div",{onClick:s,className:"   px-4    py-3    hover:bg-neutral-100    transition   font-semibold   ",children:l})},f=l(4817),g=e=>{let{currentUser:s}=e,l=(0,a.useRouter)(),t=(0,h.Z)(),o=(0,m.Z)(),i=(0,p.Z)(),[n,c]=(0,d.useState)(!1),g=(0,d.useCallback)(()=>{c(e=>!e)},[]),j=(0,d.useCallback)(()=>{if(!s)return t.onOpen();i.onOpen()},[t,i,s]);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,r.jsx)("div",{onClick:j,className:"   hidden   md:block   text-sm    font-semibold    py-3    px-4    rounded-full    hover:bg-[#B0AEAB]   transition    cursor-pointer   text-white   ",children:"Rent your properties"}),(0,r.jsxs)("div",{onClick:g,className:"   p-4   md:py-1   md:px-2   border-[1px]    border-neutral-200    flex    flex-row    items-center    gap-3    rounded-full    cursor-pointer    hover:shadow-md    transition   ",children:[(0,r.jsx)(u.qTj,{}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)(f.Z,{src:null==s?void 0:s.image})})]})]}),n&&(0,r.jsx)("div",{className:"   absolute    rounded-xl    shadow-md   w-[40vw]   md:w-3/4    bg-white    overflow-hidden    right-0    top-12    text-sm   ",children:(0,r.jsx)("div",{className:"flex flex-col cursor-pointer",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{label:"My favorites",onClick:()=>l.push("/favorites")}),(0,r.jsx)(b,{label:"My properties",onClick:()=>l.push("/properties")}),(0,r.jsx)(b,{label:"Rent your properties",onClick:i.onOpen}),(0,r.jsx)("hr",{}),(0,r.jsx)(b,{label:"Logout",onClick:()=>(0,x.signOut)()})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{label:"Login",onClick:t.onOpen}),(0,r.jsx)(b,{label:"Sign up",onClick:o.onOpen})]})})})]})},j=e=>{let{currentUser:s}=e,[l,i]=(0,d.useState)([]);return(0,d.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/listings"),s=await e.json();i(s)}catch(e){console.error("Error fetching listings:",e)}};e()},[]),(0,r.jsxs)("div",{className:"fixed w-full bg-[#1B4571] z-10 shadow-sm",children:[(0,r.jsx)("div",{className:"   py-4    border-b-[1px]   ",children:(0,r.jsx)(o.default,{children:(0,r.jsxs)("div",{className:"   flex    flex-row    items-center    justify-between   gap-3   md:gap-0   ",children:[(0,r.jsx)(c,{}),(0,r.jsx)(g,{currentUser:s})]})})}),(0,r.jsx)(t.Z,{})]})}},4446:function(e,s,l){"use strict";var r=l(5760);let t=(0,r.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));s.Z=t},6779:function(e,s,l){"use strict";var r=l(5760);let t=(0,r.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));s.Z=t},384:function(e,s,l){"use strict";l.r(s);var r=l(1264),t=l(3451);s.default=()=>(0,r.jsx)(t.x7,{})},9969:function(){}},function(e){e.O(0,[286,742,515,552,554,977,811,310,267,274,774,597,744],function(){return e(e.s=4916)}),_N_E=e.O()}]);